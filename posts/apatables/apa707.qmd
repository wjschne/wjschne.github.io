---
title: Recreating APA Manual Table 7.7 in R with apa7
date: '2025-09-17'
engine: knitr
categories: 
  - R
  - APA Style
description: "Demonstration of the apa7 package, a flextable extension package"
tags:
  - APA Style
  - flextable
  - apa7
csl: _extensions/wjschne/apaquarto/apa.csl
format:
  html: 
    theme: [minty, "../../style/schneider.scss", "../../style/apablog.scss"]
    fig-cap-location: top
    citeproc: false
    link-external-icon: false
    link-external-newwindow: false
    toc: true
    toc-location: left
    anchor-sections: false
    html-math-method: katex
    knitr: 
      opts_chunk: 
        dev: svglite
    # code-annotations: hover
    filters:  
      - at: pre-ast
        path: _extensions/wjschne/apaquarto/crossrefprefix.lua
      - at: pre-ast
        path: _extensions/wjschne/apaquarto/apafigtblappendix.lua
      - at: post-render
        path: _extensions/wjschne/apaquarto/apacaption.lua
      - at: post-render
        path: _extensions/wjschne/apaquarto/apaextractfigure.lua
      - at: post-render
        path: _extensions/wjschne/apaquarto/apanote.lua
      - at: post-render
        path: _extensions/wjschne/apaquarto/apafloat.lua
      - at: post-render
        path: _extensions/wjschne/apaquarto/apafloat.lua
      - at: post-render
        path: _extensions/wjschne/apaquarto/citeprocr.lua
      - at: post-render
        path: _extensions/wjschne/apaquarto/apaandcite.lua
---

# Making tables in APA style (Part 7 of 24)

In this 24-part series, each of the tables in Chapter 7 of the *Publication Manual of the American Psychological Association* (7th Edition) is recreated with [apa7](https://wjschne.github.io/apa7/), [flextable](https://ardata-fr.github.io/flextable-book/), [easystats](https://easystats.github.io/easystats/), and [tidyverse](https://www.tidyverse.org/packages/) functions.

:::{.callout-note}
# Highlights

* Convert p-values to stars and append them to chi-square statistic with `add_star_column`
* Add p-value note with `flextable::add_footer_lines`
* Hanging indent with `hanging_indent`

:::

```{r}
#| label: setup
#| include: false
library(apa7)
library(flextable)
library(ftExtra)
library(tidyverse)
set_flextable_defaults(theme_fun = theme_apa, 
                       font.family = "Times New Roman")

```

```{r postsetup, eval=FALSE}
<<setup>>
```


![Screenshot of the *APA Manual*'s Table 7.7](table77.png){#fig-77 width="100%"}

I could have just copied the table directly, but I decided to illustrate how one might calculate percentages and chi-square tests results from the sample sizes.


```{r}
#| label: tbl-77
#| echo: fenced
#| tbl-cap: "Frequencies and Chi-Square Results for 
#|           Belief Perseverance in Attitudes Toward 
#|           Celebrities (*N*&nbsp;=&nbsp;201)"
# Make data
d <- "
Source                       	Do not believe	Unsure	Believe   
Media reports                	17            	140   	44
Family reports               	47            	106   	48
Friends' reports             	42            	112   	47
Caught by media              	19            	82    	100
Celebrity display of behavior	12            	61    	128" |>
  readr::read_tsv(show_col_types = FALSE)

# Format data
d_formatted <- d |>
  pivot_longer(-c(Source), values_to = "n") |>
  mutate(name = fct_inorder(name)) |>
  mutate(`%` = scales::number(100 * `n` / sum(`n`), accuracy = .01),
         .by = Source) |>
  nest(data = -Source, .by = Source) |>
  mutate(
    fit = map(data, \(dd) {
      chisq.test(dd$n)
    }),
    chisq = map_dbl(fit, "statistic"),
    p = map_dbl(fit, "p.value")
  ) |>
  select(-fit) |>
  unnest(data) |>
  pivot_wider_name_first(values_from = c(`n`, `%`)) |>
  relocate(chisq, .after = dplyr::last_col()) |>
  mutate(across(-Source, align_chr)) |>
  mutate(Source = hanging_indent(Source, width = 18)) |>
  add_star_column(chisq, alpha = .001, merge = TRUE) |>
  select(-p) |> 
  rename(`&chi;^2^(2)` = chisq)

# Make table
d_formatted |> 
  apa_flextable(table_width = 1, layout = "fixed") |>
  width(width = c(1.6, rep(c(.65,.65, .05), 3)[-9], .9)) |> 
  add_footer_lines(values = as_paragraph_md("^\\*^*p* < .001"))
```

<nav aria-label="Page navigation example">
  <ul class="pagination justify-content-end">
    <li class="page-item"><a class="page-link" href="apa701.html">First</a></li>
    <li class="page-item"><a class="page-link" href="apa706.html">Previous</a></li>
    <li class="page-item"><a class="page-link" href="apa708.html">Next</a></li>
    <li class="page-item"><a class="page-link" href="apa724.html">Last</a></li>
  </ul>
</nav>