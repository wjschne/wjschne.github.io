---
title: Recreating APA Manual Table 7.8 in R with apa7
date: '2025-08-24'
engine: knitr
categories: 
  - R
description: "Demonstration of the apa7 package, a flextable extension package"
tags:
  - APA Style
  - flextable
  - apa7
csl: _extensions/wjschne/apaquarto/apa.csl
format:
  html: 
    fig-cap-location: top
    citeproc: false
    link-external-icon: false
    link-external-newwindow: false
    toc: true
    toc-location: left
    anchor-sections: false
    html-math-method: katex
    knitr: 
      opts_chunk: 
        dev: svglite
    # code-annotations: hover
    filters:  
      - at: pre-ast
        path: _extensions/wjschne/apaquarto/crossrefprefix.lua
      - at: pre-ast
        path: _extensions/wjschne/apaquarto/apafigtblappendix.lua
      - at: post-render
        path: _extensions/wjschne/apaquarto/apacaption.lua
      - at: post-render
        path: _extensions/wjschne/apaquarto/apaextractfigure.lua
      - at: post-render
        path: _extensions/wjschne/apaquarto/apanote.lua
      - at: post-render
        path: _extensions/wjschne/apaquarto/apafloat.lua
      - at: post-render
        path: _extensions/wjschne/apaquarto/apafloat.lua
      - at: post-render
        path: _extensions/wjschne/apaquarto/citeprocr.lua
      - at: post-render
        path: _extensions/wjschne/apaquarto/apaandcite.lua
---

# Making tables in APA style (Part 8 of 24)

In this 24-part series, each of the tables in Chapter 7 of the *Publication Manual of the American Psychological Association* (7th Edition) is recreated with [apa7](https://wjschne.github.io/apa7/), [flextable](https://ardata-fr.github.io/flextable-book/), [easystats](https://easystats.github.io/easystats/), and [tidyverse](https://www.tidyverse.org/packages/) functions.

:::{.callout-note}
# Highlights

* Add `footnote`

:::

```{r}
#| label: setup
#| include: false
library(apa7)
library(flextable)
library(ftExtra)
library(tidyverse)
library(signs)
set_flextable_defaults(theme_fun = theme_apa, 
                       font.family = "Times New Roman")

```

```{r postsetup, eval=FALSE}
<<setup>>
```


![Screenshot of the *APA Manual*'s Table 7.8](table78.png){#fig-78 width="100%"}

If it were simply a matter of copying the text into the table, this would be fairly simple. However, in a real analysis, the text does not come pre-formatted. Thus, I simulated the data first, and then proceeded as if I had to conduct the t-tests and report the results from scratch. 

For this one, the trick is to get the rounding right for the means and standard deviations. Each row is on a different scale, and needs different rounding rules. The easiest way I could do this was to first apply regular rounding with `round` and then round to a set number of significant digits with `formatC`.

Normally, I would respect the direction of the effect, but @fig-78 makes *t* and Cohen's *d* positive for all three rows despite the change in direction for the middle row.

```{r}
#| label: tbl-78
#| tbl-cap: Results of Curve-Fitting Analysis Examining the 
#|          Time Course of Fixations to the Target
#| apa-note: "For each participant, the logistic function was 
#|           fit to target fixations separately. The maximum 
#|           asymptote is the asymptotic degree of looking at 
#|           the end of the time course of fixations. The 
#|           crossover point is the point in time the function 
#|           crosses the midway point between peak and baseline. 
#|           The slope represents the rate of change in the 
#|           function measured at the crossover. Mean parameter 
#|           values for each of the analyses are shown for the 
#|           9-year-olds (*n*&nbsp;=&nbsp;24) and 16-year-olds (*n*&nbsp;=&nbsp;18), 
#|           as well as the results of t tests (assuming unequal 
#|           variance) comparing the parameter estimates between 
#|           the two ages."
#| echo: fenced
set.seed(8)

# Make data
d <- tibble::tribble(
                      ~`Logistic Parameter`, ~Age,    ~M,    ~SD,
          "Maximum asymptote, proportion",   9L, 0.843,  0.135,
                       "Crossover, in ms",   9L,   759,     87,
  "Slope, as change in proportion per ms",   9L, 0.001,  .0002,
          "Maximum asymptote, proportion",  16L, 0.877,  0.082,
                       "Crossover, in ms",  16L,   694,     42,
  "Slope, as change in proportion per ms",  16L, 0.002,  .0002
  ) |> 
  mutate(n = ifelse(Age == 9L, 24, 18)) |> 
  mutate(x = pmap(list(M, SD, n), 
                  \(M, SD, n) rnorm(n, M, SD))) |> 
  select(data = -c(M,SD, n)) |> 
  unnest(x) |> 
  nest(data = -`Logistic Parameter`) 

# Analyze data
d <- d |> 
  mutate(t_fit = map(data, \(d) t.test(
    x ~ Age, data = d)),
         cohen = map(data, \(d) effectsize::cohens_d(
           x ~ Age, 
           data = d))) |> 
  unnest(cohen)

# Format data
d <- d |> 
  select(-starts_with("CI")) |> 
  mutate(`t(40)` = map_dbl(t_fit, "statistic") |> 
           abs() |> 
           signs(accuracy = .001), 
         `p` = map_dbl(t_fit, "p.value") |> 
           apa_p(min_digits = 3),
         .before = Cohens_d) |> 
  select(-t_fit) |> 
  mutate(data = pmap(
    list(d = data, 
         round_digits = c(3, 0, 4),
         sig_digits = c(3, 3, 1)), 
    \(d, round_digits, sig_digits) {
      d |> 
        summarise(M = mean(x), 
                  SD = sd(x),
                  .by = Age) |> 
        mutate(across(c(M, SD), \(x) {
          round(x, round_digits) |> 
            formatC(digits = sig_digits) |> 
            trimws() |> 
            str_remove("^0")
          }))
  })) |> 
  unnest(data) |> 
  mutate(Age = paste0(Age, "-year-olds"), 
         Cohens_d = signs(abs(Cohens_d), 
                                 accuracy = .001)) |> 
  pivot_wider_name_first(
    values_from = c(M, SD), 
    names_from = Age) |> 
  select(`Logistic Parameter`, 
         contains("olds"), 
         everything()) |> 
  mutate(`Logistic Parameter` = hanging_indent(`Logistic Parameter`)) |> 
  mutate(across(`t(40)`:Cohens_d, align_chr))


# Make table
d |> 
  apa_format_columns(no_format_columns = contains("olds")) |> 
  apa_flextable(auto_format_columns = FALSE) |> 
  align(j = 1, align = "left") |> 
  italic(i = 1, part = "header")

```