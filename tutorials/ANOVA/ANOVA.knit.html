<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.3">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="W. Joel Schneider">
<meta name="dcterms.date" content="2024-03-05">
<meta name="description" content="W. Joel Schneider is a professor at Temple University.">

<title>W. Joel Schneider</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../..//images/favicon.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-81b5c3e63835cfde897ecd3d35a35a41.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-17c3315df694ace12de6a8090180650b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css">

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="W. Joel Schneider">
<meta property="og:description" content="Plot group means and test to see if their differences are statistically significant.">
<meta property="og:image" content="https://wjschne.github.io/tutorials/ANOVA/ANOVA_files/figure-html/ggplotmeans-1.png">
<meta property="og:site_name" content="W. Joel Schneider">
<meta property="og:image:height" content="960">
<meta property="og:image:width" content="1344">
</head>

<body class="floating nav-fixed slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">W. Joel Schneider</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html"> 
<span class="menu-text">R Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../assessingpsyche.html"> 
<span class="menu-text">Assessment Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../vita.html"> 
<span class="menu-text">Vita</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects.html"> 
<span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../presentations.html"> 
<span class="menu-text">Presentations</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../software.html"> 
<span class="menu-text">Software</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../tutorials.html"> 
<span class="menu-text">Tutorials</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="mailto:schneider@temple.edu" rel="noreferrer noopener" target="_blank"> <i class="bi bi-envelope" role="img" aria-label="Email">
</i> 
<span class="menu-text">Email</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/wjschne" rel="noreferrer noopener" target="_blank"> <i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
<span class="menu-text">GitHub</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../blog.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">ANOVA in R</h1>
                  <div>
        <div class="description">
          Plot group means and test to see if their differences are statistically significant.
        </div>
      </div>
                </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>W. Joel Schneider </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">March 5, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#load-packages" id="toc-load-packages" class="nav-link active" data-scroll-target="#load-packages">Load Packages</a></li>
  <li><a href="#import-data-and-create-labelled-factors" id="toc-import-data-and-create-labelled-factors" class="nav-link" data-scroll-target="#import-data-and-create-labelled-factors">Import Data and Create Labelled Factors</a></li>
  <li><a href="#descriptives" id="toc-descriptives" class="nav-link" data-scroll-target="#descriptives">Descriptives</a></li>
  <li><a href="#selecting-specific-variables" id="toc-selecting-specific-variables" class="nav-link" data-scroll-target="#selecting-specific-variables">Selecting specific variables</a>
  <ul class="collapse">
  <li><a href="#basic-descriptives" id="toc-basic-descriptives" class="nav-link" data-scroll-target="#basic-descriptives">Basic descriptives</a></li>
  </ul></li>
  <li><a href="#plot" id="toc-plot" class="nav-link" data-scroll-target="#plot">Plot</a></li>
  <li><a href="#create-one-way-anova" id="toc-create-one-way-anova" class="nav-link" data-scroll-target="#create-one-way-anova">Create One-Way ANOVA</a>
  <ul class="collapse">
  <li><a href="#diagnostic-plots" id="toc-diagnostic-plots" class="nav-link" data-scroll-target="#diagnostic-plots">Diagnostic Plots</a></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary">Summary</a></li>
  <li><a href="#other-summary-functions" id="toc-other-summary-functions" class="nav-link" data-scroll-target="#other-summary-functions">Other Summary Functions</a></li>
  <li><a href="#automated-interpretation" id="toc-automated-interpretation" class="nav-link" data-scroll-target="#automated-interpretation">Automated Interpretation</a></li>
  <li><a href="#post-hoc-tests" id="toc-post-hoc-tests" class="nav-link" data-scroll-target="#post-hoc-tests">Post-hoc Tests</a></li>
  </ul></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block page-columns page-full" id="quarto-document-content">





<section id="load-packages" class="level1">
<h1>Load Packages</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(easystats)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="import-data-and-create-labelled-factors" class="level1 page-columns page-full">
<h1>Import Data and Create Labelled Factors</h1>

<div class="no-row-height column-margin column-container"><div class="">
<p>The haven package will import data as a “tibble.” A tibble is a container for tabular data. It is an enhancement of the base R’s data.frame.</p>
<p>Hadley Wickham, the programmer who started the tidyverse, enjoys naming things precisely but with a touch of humor. “Tibble” is what people in the U.S. sometimes hear when New Zealanders like Hadley say the word “table.”</p>
</div></div><div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># File location</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>file <span class="ot">&lt;-</span> <span class="st">"https://github.com/wjschne/EDUC5325/raw/master/Attachment.sav"</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Import SPSS data file using haven</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Also, change the Attachment variable to a factor</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> haven<span class="sc">::</span><span class="fu">read_spss</span>(file) <span class="sc">%&gt;%</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Attachment =</span> <span class="fu">as_factor</span>(Attachment))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="descriptives" class="level1">
<h1>Descriptives</h1>
<p>The variables in <code>d</code> are:</p>
<ul>
<li><code>Attachment</code>: Classifies each person’s attachment type: Secure, Avoidant, or Ambivalent</li>
<li><code>Anxiety_Questionnaire</code>: A summary score from a questionnaire measure of anxiety</li>
<li><code>Anxiety_Physiological</code>: A summary score from various physiological measures of anxiety</li>
</ul>
<p>There are 300 rows (cases) and 3 columns (variables).</p>
<p>Let’s get a sense of what is in the data frame.</p>
<p>We can look at the first 6 rows of the data using the <code>head</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  Attachment Anxiety_Physiological Anxiety_Questionnaire
  &lt;fct&gt;                      &lt;dbl&gt;                 &lt;dbl&gt;
1 Secure                      59.8                  57.9
2 Ambivalent                  63.3                  63.4
3 Avoidant                    72.2                  51.5
4 Secure                      41.6                  38.6
5 Ambivalent                  77.8                  82.5
6 Ambivalent                  51.6                  50.8</code></pre>
</div>
</div>
<p>A nice summary of what the variables are:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data_codebook</span>(d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>d (300 rows and 3 variables, 3 shown)

ID | Name                  | Type        | Missings |         Values |           N
---+-----------------------+-------------+----------+----------------+------------
1  | Attachment            | categorical | 0 (0.0%) |         Secure | 110 (36.7%)
   |                       |             |          |       Avoidant |  85 (28.3%)
   |                       |             |          |     Ambivalent | 105 (35.0%)
---+-----------------------+-------------+----------+----------------+------------
2  | Anxiety_Physiological | numeric     | 0 (0.0%) | [22.78, 93.88] |         300
---+-----------------------+-------------+----------+----------------+------------
3  | Anxiety_Questionnaire | numeric     | 0 (0.0%) | [21.79, 92.38] |         300
----------------------------------------------------------------------------------</code></pre>
</div>
</div>
</section>
<section id="selecting-specific-variables" class="level1">
<h1>Selecting specific variables</h1>
<p>Data sets in tutorials like this one are often unrealistically small. If there are only three variables, we are happy to describe all the variables in a single table.</p>
<p>Real data sets can have dozens, hundreds, or even thousands of variables. Describing hundreds of variables in a single table is usually impractical. We need a way to select from the data just the variables we want.</p>
<p>There are many ways to select variables in R, but I am going to keep things simple and consistent. I will use the <code>select</code> function from the tidyverse any time I select a variable. The <code>select</code> function is rarely used by itself. We use it as a preliminary step before doing something else (i.e., to specify which variables to describe, analyze, or plot). For this reason, it is often used in the middle sequence of commands linked with the “pipe” operator: <code>%&gt;%</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Anxiety_Questionnaire, Anxiety_Physiological) <span class="sc">%&gt;%</span> </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cor</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                      Anxiety_Questionnaire Anxiety_Physiological
Anxiety_Questionnaire                  1.00                  0.75
Anxiety_Physiological                  0.75                  1.00</code></pre>
</div>
</div>
<p>The pipe operator inserts the output of the previous command into the next function. You can think of it as meaning “and then…”</p>
<p>The code above can be interpreted as a series of steps: 1. Start with the data in <code>d</code>AND THEN 2. Select the variables <code>Anxiety_Questionnaire</code> and <code>Anxiety_Physiological</code> AND THEN 3. Create a correlation matrix.</p>
<p>It makes it convenient to link a series of commands in a readable format.</p>
<p>You can select as many variables as you wish, separated by commas. You do not need to put variable names in quotes.</p>
<p>The <code>select</code> function allows for selecting as many variables from the data as you wish:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Attachment, Anxiety_Physiological)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 300 × 2
   Attachment Anxiety_Physiological
   &lt;fct&gt;                      &lt;dbl&gt;
 1 Secure                      59.8
 2 Ambivalent                  63.3
 3 Avoidant                    72.2
 4 Secure                      41.6
 5 Ambivalent                  77.8
 6 Ambivalent                  51.6
 7 Secure                      57.7
 8 Ambivalent                  69.6
 9 Avoidant                    67.7
10 Avoidant                    71.7
# ℹ 290 more rows</code></pre>
</div>
</div>
<p>Use the <code>-</code> sign to exclude a variable:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Attachment)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 300 × 2
   Anxiety_Physiological Anxiety_Questionnaire
                   &lt;dbl&gt;                 &lt;dbl&gt;
 1                  59.8                  57.9
 2                  63.3                  63.4
 3                  72.2                  51.5
 4                  41.6                  38.6
 5                  77.8                  82.5
 6                  51.6                  50.8
 7                  57.7                  56.1
 8                  69.6                  75.9
 9                  67.7                  49.7
10                  71.7                  52.3
# ℹ 290 more rows</code></pre>
</div>
</div>
<p>Select variables that contain “Anxiety”</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">"Anxiety"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 300 × 2
   Anxiety_Physiological Anxiety_Questionnaire
                   &lt;dbl&gt;                 &lt;dbl&gt;
 1                  59.8                  57.9
 2                  63.3                  63.4
 3                  72.2                  51.5
 4                  41.6                  38.6
 5                  77.8                  82.5
 6                  51.6                  50.8
 7                  57.7                  56.1
 8                  69.6                  75.9
 9                  67.7                  49.7
10                  71.7                  52.3
# ℹ 290 more rows</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Alternative Selection Methods
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>R’s delightful flexibility makes for a bewildering array of options! Here just a few of the many ways we could select the <code>Attachment</code> variable from data.frame <code>d</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># By name</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>d[, <span class="st">"Attachment"</span>] </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 300 × 1
   Attachment
   &lt;fct&gt;     
 1 Secure    
 2 Ambivalent
 3 Avoidant  
 4 Secure    
 5 Ambivalent
 6 Ambivalent
 7 Secure    
 8 Ambivalent
 9 Avoidant  
10 Avoidant  
# ℹ 290 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># By position</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>d[, <span class="dv">1</span>] </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 300 × 1
   Attachment
   &lt;fct&gt;     
 1 Secure    
 2 Ambivalent
 3 Avoidant  
 4 Secure    
 5 Ambivalent
 6 Ambivalent
 7 Secure    
 8 Ambivalent
 9 Avoidant  
10 Avoidant  
# ℹ 290 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Selecting always returns a data.frame or tibble</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(d, Attachment)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 300 × 1
   Attachment
   &lt;fct&gt;     
 1 Secure    
 2 Ambivalent
 3 Avoidant  
 4 Secure    
 5 Ambivalent
 6 Ambivalent
 7 Secure    
 8 Ambivalent
 9 Avoidant  
10 Avoidant  
# ℹ 290 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extracting a vector from the data</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>d<span class="sc">$</span>Attachment</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] Secure     Ambivalent Avoidant   Secure     Ambivalent Ambivalent
  [7] Secure     Ambivalent Avoidant   Avoidant   Avoidant   Secure    
 [13] Ambivalent Secure     Avoidant   Ambivalent Ambivalent Secure    
 [19] Avoidant   Secure     Avoidant   Avoidant   Ambivalent Secure    
 [25] Avoidant   Avoidant   Secure     Avoidant   Ambivalent Secure    
 [31] Secure     Secure     Ambivalent Ambivalent Avoidant   Avoidant  
 [37] Ambivalent Secure     Ambivalent Secure     Ambivalent Secure    
 [43] Secure     Secure     Ambivalent Ambivalent Ambivalent Avoidant  
 [49] Avoidant   Ambivalent Secure     Secure     Ambivalent Ambivalent
 [55] Secure     Ambivalent Ambivalent Ambivalent Avoidant   Ambivalent
 [61] Ambivalent Ambivalent Avoidant   Secure     Ambivalent Avoidant  
 [67] Avoidant   Avoidant   Secure     Secure     Secure     Secure    
 [73] Secure     Secure     Secure     Ambivalent Secure     Ambivalent
 [79] Avoidant   Avoidant   Avoidant   Ambivalent Secure     Avoidant  
 [85] Secure     Ambivalent Ambivalent Secure     Ambivalent Avoidant  
 [91] Ambivalent Avoidant   Avoidant   Avoidant   Avoidant   Secure    
 [97] Avoidant   Secure     Secure     Avoidant   Secure     Avoidant  
[103] Ambivalent Ambivalent Secure     Avoidant   Ambivalent Avoidant  
[109] Secure     Secure     Secure     Ambivalent Avoidant   Avoidant  
[115] Ambivalent Ambivalent Ambivalent Secure     Ambivalent Avoidant  
[121] Secure     Secure     Ambivalent Ambivalent Secure     Ambivalent
[127] Avoidant   Secure     Ambivalent Avoidant   Secure     Ambivalent
[133] Secure     Ambivalent Secure     Avoidant   Avoidant   Ambivalent
[139] Secure     Avoidant   Secure     Secure     Avoidant   Secure    
[145] Avoidant   Ambivalent Ambivalent Secure     Avoidant   Secure    
[151] Secure     Avoidant   Ambivalent Avoidant   Ambivalent Secure    
[157] Ambivalent Secure     Secure     Secure     Ambivalent Ambivalent
[163] Secure     Ambivalent Secure     Avoidant   Secure     Ambivalent
[169] Secure     Avoidant   Ambivalent Secure     Secure     Ambivalent
[175] Avoidant   Ambivalent Avoidant   Secure     Avoidant   Avoidant  
[181] Ambivalent Avoidant   Ambivalent Ambivalent Secure     Ambivalent
[187] Secure     Ambivalent Secure     Secure     Secure     Avoidant  
[193] Ambivalent Secure     Avoidant   Secure     Secure     Secure    
[199] Secure     Secure     Ambivalent Avoidant   Avoidant   Ambivalent
[205] Avoidant   Ambivalent Secure     Secure     Secure     Secure    
[211] Ambivalent Avoidant   Ambivalent Ambivalent Ambivalent Secure    
[217] Avoidant   Secure     Avoidant   Secure     Secure     Ambivalent
[223] Avoidant   Avoidant   Ambivalent Ambivalent Ambivalent Avoidant  
[229] Ambivalent Ambivalent Ambivalent Avoidant   Ambivalent Avoidant  
[235] Ambivalent Secure     Avoidant   Secure     Secure     Avoidant  
[241] Ambivalent Secure     Avoidant   Ambivalent Ambivalent Ambivalent
[247] Avoidant   Avoidant   Secure     Avoidant   Ambivalent Secure    
[253] Secure     Secure     Ambivalent Secure     Secure     Secure    
[259] Secure     Avoidant   Ambivalent Secure     Avoidant   Avoidant  
[265] Ambivalent Ambivalent Secure     Ambivalent Ambivalent Avoidant  
[271] Ambivalent Ambivalent Ambivalent Secure     Ambivalent Avoidant  
[277] Ambivalent Secure     Secure     Secure     Secure     Ambivalent
[283] Avoidant   Ambivalent Secure     Ambivalent Avoidant   Avoidant  
[289] Ambivalent Avoidant   Secure     Secure     Ambivalent Avoidant  
[295] Ambivalent Avoidant   Secure     Secure     Secure     Avoidant  
Levels: Secure Avoidant Ambivalent</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pulling a vector frome the data (a pipe-friendly version of `$`)</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span> </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(Attachment)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] Secure     Ambivalent Avoidant   Secure     Ambivalent Ambivalent
  [7] Secure     Ambivalent Avoidant   Avoidant   Avoidant   Secure    
 [13] Ambivalent Secure     Avoidant   Ambivalent Ambivalent Secure    
 [19] Avoidant   Secure     Avoidant   Avoidant   Ambivalent Secure    
 [25] Avoidant   Avoidant   Secure     Avoidant   Ambivalent Secure    
 [31] Secure     Secure     Ambivalent Ambivalent Avoidant   Avoidant  
 [37] Ambivalent Secure     Ambivalent Secure     Ambivalent Secure    
 [43] Secure     Secure     Ambivalent Ambivalent Ambivalent Avoidant  
 [49] Avoidant   Ambivalent Secure     Secure     Ambivalent Ambivalent
 [55] Secure     Ambivalent Ambivalent Ambivalent Avoidant   Ambivalent
 [61] Ambivalent Ambivalent Avoidant   Secure     Ambivalent Avoidant  
 [67] Avoidant   Avoidant   Secure     Secure     Secure     Secure    
 [73] Secure     Secure     Secure     Ambivalent Secure     Ambivalent
 [79] Avoidant   Avoidant   Avoidant   Ambivalent Secure     Avoidant  
 [85] Secure     Ambivalent Ambivalent Secure     Ambivalent Avoidant  
 [91] Ambivalent Avoidant   Avoidant   Avoidant   Avoidant   Secure    
 [97] Avoidant   Secure     Secure     Avoidant   Secure     Avoidant  
[103] Ambivalent Ambivalent Secure     Avoidant   Ambivalent Avoidant  
[109] Secure     Secure     Secure     Ambivalent Avoidant   Avoidant  
[115] Ambivalent Ambivalent Ambivalent Secure     Ambivalent Avoidant  
[121] Secure     Secure     Ambivalent Ambivalent Secure     Ambivalent
[127] Avoidant   Secure     Ambivalent Avoidant   Secure     Ambivalent
[133] Secure     Ambivalent Secure     Avoidant   Avoidant   Ambivalent
[139] Secure     Avoidant   Secure     Secure     Avoidant   Secure    
[145] Avoidant   Ambivalent Ambivalent Secure     Avoidant   Secure    
[151] Secure     Avoidant   Ambivalent Avoidant   Ambivalent Secure    
[157] Ambivalent Secure     Secure     Secure     Ambivalent Ambivalent
[163] Secure     Ambivalent Secure     Avoidant   Secure     Ambivalent
[169] Secure     Avoidant   Ambivalent Secure     Secure     Ambivalent
[175] Avoidant   Ambivalent Avoidant   Secure     Avoidant   Avoidant  
[181] Ambivalent Avoidant   Ambivalent Ambivalent Secure     Ambivalent
[187] Secure     Ambivalent Secure     Secure     Secure     Avoidant  
[193] Ambivalent Secure     Avoidant   Secure     Secure     Secure    
[199] Secure     Secure     Ambivalent Avoidant   Avoidant   Ambivalent
[205] Avoidant   Ambivalent Secure     Secure     Secure     Secure    
[211] Ambivalent Avoidant   Ambivalent Ambivalent Ambivalent Secure    
[217] Avoidant   Secure     Avoidant   Secure     Secure     Ambivalent
[223] Avoidant   Avoidant   Ambivalent Ambivalent Ambivalent Avoidant  
[229] Ambivalent Ambivalent Ambivalent Avoidant   Ambivalent Avoidant  
[235] Ambivalent Secure     Avoidant   Secure     Secure     Avoidant  
[241] Ambivalent Secure     Avoidant   Ambivalent Ambivalent Ambivalent
[247] Avoidant   Avoidant   Secure     Avoidant   Ambivalent Secure    
[253] Secure     Secure     Ambivalent Secure     Secure     Secure    
[259] Secure     Avoidant   Ambivalent Secure     Avoidant   Avoidant  
[265] Ambivalent Ambivalent Secure     Ambivalent Ambivalent Avoidant  
[271] Ambivalent Ambivalent Ambivalent Secure     Ambivalent Avoidant  
[277] Ambivalent Secure     Secure     Secure     Secure     Ambivalent
[283] Avoidant   Ambivalent Secure     Ambivalent Avoidant   Avoidant  
[289] Ambivalent Avoidant   Secure     Secure     Ambivalent Avoidant  
[295] Ambivalent Avoidant   Secure     Secure     Secure     Avoidant  
Levels: Secure Avoidant Ambivalent</code></pre>
</div>
</div>
<p>In this case, there is no strong reason to prefer one method over the other. As you gain experience with R, you might find reasons to use different methods of selection. For now, we will stick to <code>select</code></p>
</div>
</div>
</div>
<section id="basic-descriptives" class="level2">
<h2 class="anchored" data-anchor-id="basic-descriptives">Basic descriptives</h2>
<p>Numeric variables can be described in terms of means, standard deviations (SD), interquartile ranges (IQR), skewness, and kurtosis:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">describe_distribution</span>(d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Variable              |  Mean |    SD |   IQR |          Range | Skewness
-------------------------------------------------------------------------
Anxiety_Physiological | 60.49 | 12.79 | 16.43 | [22.78, 93.88] |    -0.29
Anxiety_Questionnaire | 55.11 | 13.30 | 18.24 | [21.79, 92.38] |     0.05

Variable              | Kurtosis |   n | n_Missing
--------------------------------------------------
Anxiety_Physiological |     0.24 | 300 |         0
Anxiety_Questionnaire |    -0.16 | 300 |         0</code></pre>
</div>
</div>
<p>Categorical variables are often described in terms of frequencies tables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span> </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Attachment) <span class="sc">%&gt;%</span> </span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data_tabulate</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Attachment (Attachment) &lt;categorical&gt;
# total N=300 valid N=300

Value      |   N | Raw % | Valid % | Cumulative %
-----------+-----+-------+---------+-------------
Secure     | 110 | 36.67 |   36.67 |        36.67
Avoidant   |  85 | 28.33 |   28.33 |        65.00
Ambivalent | 105 | 35.00 |   35.00 |       100.00
&lt;NA&gt;       |   0 |  0.00 |    &lt;NA&gt; |         &lt;NA&gt;</code></pre>
</div>
</div>
<p>We can get descriptives statistics of our numeric variables separated by group. There are many ways to do this, but the simplest is the <code>describeBy</code> function from the psych package</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>psych<span class="sc">::</span><span class="fu">describeBy</span>(d, <span class="at">group =</span> <span class="st">"Attachment"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 Descriptive statistics by group 
Attachment: 1
                      vars   n mean sd median trimmed mad min max range  skew
Attachment               1 110    1  0      1       1   0   1   1     0   NaN
Anxiety_Physiological    2 110   50 11     51      51  12  23  70    48 -0.44
Anxiety_Questionnaire    3 110   50 11     51      51  12  23  70    46 -0.36
                      kurtosis se
Attachment                 NaN  0
Anxiety_Physiological    -0.41  1
Anxiety_Questionnaire    -0.61  1
------------------------------------------------------------ 
Attachment: 2
                      vars  n mean   sd median trimmed mad min max range skew
Attachment               1 85    2  0.0      2       2 0.0   2   2     0  NaN
Anxiety_Physiological    2 85   67  9.8     67      67 9.5  46  94    48 0.27
Anxiety_Questionnaire    3 85   48 10.6     48      48 9.9  22  74    52 0.11
                      kurtosis  se
Attachment                 NaN 0.0
Anxiety_Physiological    -0.13 1.1
Anxiety_Questionnaire    -0.10 1.1
------------------------------------------------------------ 
Attachment: 3
                      vars   n mean  sd median trimmed mad min max range skew
Attachment               1 105    3 0.0      3       3 0.0   3   3     0  NaN
Anxiety_Physiological    2 105   66 9.3     65      66 7.8  45  94    48 0.19
Anxiety_Questionnaire    3 105   66 9.9     66      66 9.3  44  92    48 0.31
                      kurtosis   se
Attachment                 NaN 0.00
Anxiety_Physiological     0.08 0.91
Anxiety_Questionnaire    -0.10 0.97</code></pre>
</div>
</div>
<p>The datawizard package has some really nice functions for descriptives:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span> </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  datawizard<span class="sc">::</span><span class="fu">means_by_group</span>(</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">select =</span> <span class="fu">contains</span>(<span class="st">"Anxiety"</span>) , </span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="st">"Attachment"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Mean of Anxiety_Physiological by Attachment

Category   |  Mean |   N |    SD |         95% CI |      p
----------------------------------------------------------
Secure     | 49.95 | 110 | 10.67 | [48.08, 51.83] | &lt; .001
Avoidant   | 67.20 |  85 |  9.84 | [65.07, 69.33] | &lt; .001
Ambivalent | 66.09 | 105 |  9.33 | [64.17, 68.00] | &lt; .001
Total      | 60.49 | 300 | 12.79 |                |       

Anova: R2=0.395; adj.R2=0.391; F=96.988; p&lt;.001

# Mean of Anxiety_Questionnaire by Attachment

Category   |  Mean |   N |    SD |         95% CI |      p
----------------------------------------------------------
Secure     | 50.09 | 110 | 10.90 | [48.13, 52.05] | &lt; .001
Avoidant   | 47.82 |  85 | 10.57 | [45.59, 50.06] | &lt; .001
Ambivalent | 66.27 | 105 |  9.90 | [64.26, 68.28] | &lt; .001
Total      | 55.11 | 300 | 13.30 |                |       

Anova: R2=0.385; adj.R2=0.381; F=92.975; p&lt;.001</code></pre>
</div>
</div>
<p>The skimr package is also quite nice:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(skimr)</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Overall summary</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span> </span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">skim</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">Piped data</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">300</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">factor</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: factor</strong></p>
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 16%">
<col style="width: 12%">
<col style="width: 16%">
<col style="width: 9%">
<col style="width: 10%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: left;">ordered</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: left;">top_counts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Attachment</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">Sec: 110, Amb: 105, Avo: 85</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 27%">
<col style="width: 12%">
<col style="width: 17%">
<col style="width: 6%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 6%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Anxiety_Physiological</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">60</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">23</td>
<td style="text-align: right;">53</td>
<td style="text-align: right;">61</td>
<td style="text-align: right;">69</td>
<td style="text-align: right;">94</td>
<td style="text-align: left;">▁▃▇▅▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">Anxiety_Questionnaire</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">55</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">22</td>
<td style="text-align: right;">46</td>
<td style="text-align: right;">55</td>
<td style="text-align: right;">64</td>
<td style="text-align: right;">92</td>
<td style="text-align: left;">▂▆▇▅▁</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Grouped summaries</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span> </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Attachment) <span class="sc">%&gt;%</span> </span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">skim</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">Piped data</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">300</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">Attachment</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 23%">
<col style="width: 11%">
<col style="width: 10%">
<col style="width: 15%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 3%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 5%">
<col style="width: 6%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: left;">Attachment</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Anxiety_Physiological</td>
<td style="text-align: left;">Secure</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">10.7</td>
<td style="text-align: right;">23</td>
<td style="text-align: right;">43</td>
<td style="text-align: right;">51</td>
<td style="text-align: right;">58</td>
<td style="text-align: right;">70</td>
<td style="text-align: left;">▂▅▆▇▃</td>
</tr>
<tr class="even">
<td style="text-align: left;">Anxiety_Physiological</td>
<td style="text-align: left;">Avoidant</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">67</td>
<td style="text-align: right;">9.8</td>
<td style="text-align: right;">46</td>
<td style="text-align: right;">61</td>
<td style="text-align: right;">67</td>
<td style="text-align: right;">73</td>
<td style="text-align: right;">94</td>
<td style="text-align: left;">▂▇▇▅▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Anxiety_Physiological</td>
<td style="text-align: left;">Ambivalent</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">66</td>
<td style="text-align: right;">9.3</td>
<td style="text-align: right;">45</td>
<td style="text-align: right;">61</td>
<td style="text-align: right;">65</td>
<td style="text-align: right;">72</td>
<td style="text-align: right;">94</td>
<td style="text-align: left;">▃▆▇▃▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">Anxiety_Questionnaire</td>
<td style="text-align: left;">Secure</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">10.9</td>
<td style="text-align: right;">23</td>
<td style="text-align: right;">42</td>
<td style="text-align: right;">51</td>
<td style="text-align: right;">59</td>
<td style="text-align: right;">70</td>
<td style="text-align: left;">▂▅▇▇▆</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Anxiety_Questionnaire</td>
<td style="text-align: left;">Avoidant</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">48</td>
<td style="text-align: right;">10.6</td>
<td style="text-align: right;">22</td>
<td style="text-align: right;">41</td>
<td style="text-align: right;">48</td>
<td style="text-align: right;">54</td>
<td style="text-align: right;">74</td>
<td style="text-align: left;">▁▅▇▃▂</td>
</tr>
<tr class="even">
<td style="text-align: left;">Anxiety_Questionnaire</td>
<td style="text-align: left;">Ambivalent</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">66</td>
<td style="text-align: right;">9.9</td>
<td style="text-align: right;">44</td>
<td style="text-align: right;">60</td>
<td style="text-align: right;">66</td>
<td style="text-align: right;">72</td>
<td style="text-align: right;">92</td>
<td style="text-align: left;">▂▆▇▃▂</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>These are convenience functions. If they do exactly what you want, great! However, I often need statistics in a data frame in a format optimal for further processing (e.g., for publication-worthy tables or plots).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>d_descriptives <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> </span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">contains</span>(<span class="st">"Anxiety"</span>), </span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"Measure"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(value),</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">SD =</span> <span class="fu">sd</span>(value),</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">.by =</span> <span class="fu">c</span>(Attachment, Measure)) <span class="sc">%&gt;%</span> </span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Measure =</span> snakecase<span class="sc">::</span><span class="fu">to_title_case</span>(Measure))</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>d_descriptives</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  Attachment Measure                Mean    SD     n
  &lt;fct&gt;      &lt;chr&gt;                 &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;
1 Secure     Anxiety Physiological  50.0 10.7    110
2 Secure     Anxiety Questionnaire  50.1 10.9    110
3 Ambivalent Anxiety Physiological  66.1  9.33   105
4 Ambivalent Anxiety Questionnaire  66.3  9.90   105
5 Avoidant   Anxiety Physiological  67.2  9.84    85
6 Avoidant   Anxiety Questionnaire  47.8 10.6     85</code></pre>
</div>
</div>
<p>This output is not pretty, but it was not intended to be. It is in a format that is easy to adapt for other things. For example, I can use the gt (“Great Tables”) package to get exactly what I want to display:</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>d_descriptives <span class="sc">%&gt;%</span> </span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>(<span class="at">groupname_col =</span> <span class="st">"Measure"</span>, </span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">rowname_col =</span> <span class="st">"Attachment"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_stub_indent</span>(<span class="fu">everything</span>(), <span class="at">indent =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="heebuyqztz" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#heebuyqztz table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#heebuyqztz thead, #heebuyqztz tbody, #heebuyqztz tfoot, #heebuyqztz tr, #heebuyqztz td, #heebuyqztz th {
  border-style: none;
}

#heebuyqztz p {
  margin: 0;
  padding: 0;
}

#heebuyqztz .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#heebuyqztz .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#heebuyqztz .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#heebuyqztz .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#heebuyqztz .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#heebuyqztz .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#heebuyqztz .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#heebuyqztz .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#heebuyqztz .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#heebuyqztz .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#heebuyqztz .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#heebuyqztz .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#heebuyqztz .gt_spanner_row {
  border-bottom-style: hidden;
}

#heebuyqztz .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#heebuyqztz .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#heebuyqztz .gt_from_md > :first-child {
  margin-top: 0;
}

#heebuyqztz .gt_from_md > :last-child {
  margin-bottom: 0;
}

#heebuyqztz .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#heebuyqztz .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#heebuyqztz .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#heebuyqztz .gt_row_group_first td {
  border-top-width: 2px;
}

#heebuyqztz .gt_row_group_first th {
  border-top-width: 2px;
}

#heebuyqztz .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#heebuyqztz .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#heebuyqztz .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#heebuyqztz .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#heebuyqztz .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#heebuyqztz .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#heebuyqztz .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#heebuyqztz .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#heebuyqztz .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#heebuyqztz .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#heebuyqztz .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#heebuyqztz .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#heebuyqztz .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#heebuyqztz .gt_left {
  text-align: left;
}

#heebuyqztz .gt_center {
  text-align: center;
}

#heebuyqztz .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#heebuyqztz .gt_font_normal {
  font-weight: normal;
}

#heebuyqztz .gt_font_bold {
  font-weight: bold;
}

#heebuyqztz .gt_font_italic {
  font-style: italic;
}

#heebuyqztz .gt_super {
  font-size: 65%;
}

#heebuyqztz .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#heebuyqztz .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#heebuyqztz .gt_indent_1 {
  text-indent: 5px;
}

#heebuyqztz .gt_indent_2 {
  text-indent: 10px;
}

#heebuyqztz .gt_indent_3 {
  text-indent: 15px;
}

#heebuyqztz .gt_indent_4 {
  text-indent: 20px;
}

#heebuyqztz .gt_indent_5 {
  text-indent: 25px;
}

#heebuyqztz .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#heebuyqztz div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="a::stub" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col"></th>
<th id="Mean" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Mean</th>
<th id="SD" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">SD</th>
<th id="n" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">n</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row odd">
<td colspan="4" id="Anxiety Physiological" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">Anxiety Physiological</td>
</tr>
<tr class="gt_row_group_first even">
<td class="gt_row gt_center gt_stub gt_indent_5" headers="Anxiety Physiological stub_1_1 stub_1">Secure</td>
<td class="gt_row gt_right" headers="Anxiety Physiological stub_1_1 Mean">50</td>
<td class="gt_row gt_right" headers="Anxiety Physiological stub_1_1 SD">10.7</td>
<td class="gt_row gt_right" headers="Anxiety Physiological stub_1_1 n">110</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center gt_stub gt_indent_5" headers="Anxiety Physiological stub_1_2 stub_1">Ambivalent</td>
<td class="gt_row gt_right" headers="Anxiety Physiological stub_1_2 Mean">66</td>
<td class="gt_row gt_right" headers="Anxiety Physiological stub_1_2 SD">9.3</td>
<td class="gt_row gt_right" headers="Anxiety Physiological stub_1_2 n">105</td>
</tr>
<tr class="even">
<td class="gt_row gt_center gt_stub gt_indent_5" headers="Anxiety Physiological stub_1_3 stub_1">Avoidant</td>
<td class="gt_row gt_right" headers="Anxiety Physiological stub_1_3 Mean">67</td>
<td class="gt_row gt_right" headers="Anxiety Physiological stub_1_3 SD">9.8</td>
<td class="gt_row gt_right" headers="Anxiety Physiological stub_1_3 n">85</td>
</tr>
<tr class="gt_group_heading_row odd">
<td colspan="4" id="Anxiety Questionnaire" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">Anxiety Questionnaire</td>
</tr>
<tr class="gt_row_group_first even">
<td class="gt_row gt_center gt_stub gt_indent_5" headers="Anxiety Questionnaire stub_1_4 stub_1">Secure</td>
<td class="gt_row gt_right" headers="Anxiety Questionnaire stub_1_4 Mean">50</td>
<td class="gt_row gt_right" headers="Anxiety Questionnaire stub_1_4 SD">10.9</td>
<td class="gt_row gt_right" headers="Anxiety Questionnaire stub_1_4 n">110</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center gt_stub gt_indent_5" headers="Anxiety Questionnaire stub_1_5 stub_1">Ambivalent</td>
<td class="gt_row gt_right" headers="Anxiety Questionnaire stub_1_5 Mean">66</td>
<td class="gt_row gt_right" headers="Anxiety Questionnaire stub_1_5 SD">9.9</td>
<td class="gt_row gt_right" headers="Anxiety Questionnaire stub_1_5 n">105</td>
</tr>
<tr class="even">
<td class="gt_row gt_center gt_stub gt_indent_5" headers="Anxiety Questionnaire stub_1_6 stub_1">Avoidant</td>
<td class="gt_row gt_right" headers="Anxiety Questionnaire stub_1_6 Mean">48</td>
<td class="gt_row gt_right" headers="Anxiety Questionnaire stub_1_6 SD">10.6</td>
<td class="gt_row gt_right" headers="Anxiety Questionnaire stub_1_6 n">85</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Or I can use ggplot2 to display means and standard deviations graphically:</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>d_descriptives <span class="sc">%&gt;%</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mean_label =</span> scales<span class="sc">::</span><span class="fu">number</span>(Mean, .<span class="dv">1</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(Attachment, Mean)) <span class="sc">+</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(Measure)) <span class="sc">+</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_pointrange</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> Mean <span class="sc">-</span> SD,</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>                      <span class="at">ymax =</span> Mean <span class="sc">+</span> SD)) <span class="sc">+</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label</span>(</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">label =</span> mean_label), </span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">hjust =</span> <span class="sc">-</span>.<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ANOVA_files/figure-html/ggplotmeans-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="plot" class="level1">
<h1>Plot</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">|&gt;</span> </span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Attachment,</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> Anxiety_Questionnaire)) <span class="sc">+</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>() <span class="sc">+</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ANOVA_files/figure-html/plot-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>Just looking at the plot, we can see that the Ambivalent group has a higher mean anxiety than the other two groups. However, let’s conduct a formal test of the difference of the group means.</p>
</section>
<section id="create-one-way-anova" class="level1">
<h1>Create One-Way ANOVA</h1>
<p>The <code>aov</code> (Analysis of Variance) function is what you want to use. The <code>anova</code> function is better used for comparing models. The dependent variable goes on the left, and any predictor variables are on the right hand side of the ~.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">aov</span>(Anxiety_Questionnaire <span class="sc">~</span> Attachment, <span class="at">data =</span> d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="diagnostic-plots" class="level2">
<h2 class="anchored" data-anchor-id="diagnostic-plots">Diagnostic Plots</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">check_model</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ANOVA_files/figure-html/assumptions-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>None of the diagnostic checks raise any alarms. Specifically, the residuals are reasonably normal and have consistent variance acrross groups (i.e., the homogeneeity of variance assumption is reasonable).</p>
</section>
<section id="summary" class="level2">
<h2 class="anchored" data-anchor-id="summary">Summary</h2>
<p>The base R function <code>summary</code> gives us most of what we might want to know.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             Df Sum Sq Mean Sq F value Pr(&gt;F)    
Attachment    2  20359   10179      93 &lt;2e-16 ***
Residuals   297  32517     109                   
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<p>We can see that overall model is significant, meaning that at least two groups have reliably different means. At this point we do not know which means differ, but from the plot we have a good guess that the Ambivalent group scores higher on the Anxiety Questionnaire than the other two groups.</p>
<p>A similar, but tidier display can be found with the <code>parameters</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">parameters</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Parameter  | Sum_Squares |  df | Mean_Square |     F |      p
-------------------------------------------------------------
Attachment |    20358.60 |   2 |    10179.30 | 92.98 | &lt; .001
Residuals  |    32516.83 | 297 |      109.48 |       |       

Anova Table (Type 1 tests)</code></pre>
</div>
</div>
</section>
<section id="other-summary-functions" class="level2">
<h2 class="anchored" data-anchor-id="other-summary-functions">Other Summary Functions</h2>
<p>The overall “fit” or “performance” of the model:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">performance</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Indices of model performance

AIC      |     AICc |      BIC |    R2 | R2 (adj.) |   RMSE |  Sigma
--------------------------------------------------------------------
2265.082 | 2265.218 | 2279.897 | 0.385 |     0.381 | 10.411 | 10.463</code></pre>
</div>
</div>
<ul>
<li><code>AIC</code>: <a href="https://en.wikipedia.org/wiki/Akaike_information_criterion">Akaike’s Information Criterion</a></li>
<li><code>AICc</code>: AIC with a correction for small sample sizes</li>
<li><code>BIC</code>: <a href="https://en.wikipedia.org/wiki/Bayesian_information_criterion">Bayesian Information Criterion</a></li>
<li><code>R2</code>: R-squared: <a href="https://en.wikipedia.org/wiki/Coefficient_of_determination">Coefficient of Determination</a></li>
<li><code>R2_adj</code>: <a href="https://en.wikipedia.org/wiki/Coefficient_of_determination#Adjusted_R2">Adjusted r-squared</a></li>
<li><code>RMSE</code>: Root mean squared error <span class="math inline">=\sqrt{\frac{\sum_{i = 1}^{n}{e_i}}{n}}</span></li>
<li><code>SIGMA</code>: Residual standard deviation (The SD of the residuals <span class="math inline">=\sqrt{\frac{\sum_{i = 1}^{n}{e_i}}{n-k-1}}</span>)</li>
</ul>
</section>
<section id="automated-interpretation" class="level2">
<h2 class="anchored" data-anchor-id="automated-interpretation">Automated Interpretation</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">report</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>The ANOVA (formula: Anxiety_Questionnaire ~ Attachment) suggests that:

  - The main effect of Attachment is statistically significant and large (F(2,
297) = 92.98, p &lt; .001; Eta2 = 0.39, 95% CI [0.32, 1.00])

Effect sizes were labelled following Field's (2013) recommendations.</code></pre>
</div>
</div>
</section>
<section id="post-hoc-tests" class="level2">
<h2 class="anchored" data-anchor-id="post-hoc-tests">Post-hoc Tests</h2>
<p>We would like to compare all means but control for family-wise error.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>fit_contrast <span class="ot">&lt;-</span> <span class="fu">estimate_contrasts</span>(fit, </span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">contrast =</span> <span class="st">"Attachment"</span>, </span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">backend =</span> <span class="st">"emmeans"</span>)</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>fit_contrast </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Marginal Contrasts Analysis

Level1   | Level2     | Difference |           95% CI |   SE | t(297) |      p
------------------------------------------------------------------------------
Avoidant | Ambivalent |     -18.44 | [-21.45, -15.44] | 1.53 | -12.08 | &lt; .001
Secure   | Ambivalent |     -16.18 | [-18.99, -13.37] | 1.43 | -11.33 | &lt; .001
Secure   | Avoidant   |       2.27 | [ -0.71,   5.24] | 1.51 |   1.50 |  0.135

Variable predicted: Anxiety_Questionnaire
Predictors contrasted: Attachment
p-values are uncorrected.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">report</span>(fit_contrast)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>The marginal contrasts analysis suggests the following. The difference between
Avoidant and Ambivalent is negative and statistically significant (difference =
-18.44, 95% CI [-21.45, -15.44], t(297) = -12.08, p &lt; .001). The difference
between Secure and Ambivalent is negative and statistically significant
(difference = -16.18, 95% CI [-18.99, -13.37], t(297) = -11.33, p &lt; .001). The
difference between Secure and Avoidant is positive and statistically
non-significant (difference = 2.27, 95% CI [ -0.71, 5.24], t(297) = 1.50, p =
0.135)</code></pre>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/wjschne\.github\.io");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>